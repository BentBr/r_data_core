# ==============================================================================
# Environment Variables Template for Demo Deployment
# ==============================================================================
# ⚠️  WARNING: This is a DEMO setup, NOT for production use.
# True production deployments should use native Kubernetes (k8s).
# ==============================================================================
# Copy this file to .env and fill in the values
# Usage: cp env.template .env && nano .env
# ==============================================================================

# ==============================================================================
# Application Environment
# ==============================================================================
APP_ENV=demo

# ==============================================================================
# GitHub Repository Owner (for Docker images)
# ==============================================================================
# Set this to your GitHub username/organization (lowercase)
# Example: GITHUB_REPO_OWNER=bentbr
GITHUB_REPO_OWNER=bentbr

# ==============================================================================
# Database Configuration
# ==============================================================================
POSTGRES_USER=postgres
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD
POSTGRES_DB=rdata

# Database connection URL (auto-constructed from above, but can override)
# DATABASE_URL=postgres://postgres:password@postgres:5432/rdata

# ==============================================================================
# Redis Configuration
# ==============================================================================
# Redis connection URL (defaults to redis://redis:6379 in docker-compose)
# REDIS_URL=redis://redis:6379

# ==============================================================================
# API Configuration
# ==============================================================================
# API host and port (internal to Docker network)
API_HOST=0.0.0.0
API_PORT=8080

# JWT Secret - MUST BE CHANGED IN PRODUCTION
# Generate a strong secret: openssl rand -base64 32
JWT_SECRET=CHANGE_ME_STRONG_JWT_SECRET

# JWT token expiration (seconds, default: 86400 = 24 hours)
JWT_EXPIRATION=86400

# Enable API documentation
API_ENABLE_DOCS=true

# CORS origins (comma-separated, no spaces)
# For demo, allow the frontend and static website domains
CORS_ORIGINS=https://demo.rdatacore.eu,https://rdatacore.eu

# ==============================================================================
# Logging Configuration
# ==============================================================================
RUST_LOG=info
LOG_LEVEL=info

# Optional: Log file path
# LOG_FILE=/var/log/r-data-core.log

# ==============================================================================
# Queue Configuration
# ==============================================================================
QUEUE_FETCH_KEY=queue:workflows:fetch
QUEUE_PROCESS_KEY=queue:workflows:process
# polls db for updated jobs in seconds
JOB_QUEUE_UPDATE_INTERVAL=30

# ==============================================================================
# Maintenance Worker Configuration
# ==============================================================================
# Cron expressions for maintenance tasks
# Format: "second minute hour day month weekday"
# Example: "0 */5 * * * *" = every 5 minutes
VERSION_PURGER_CRON=0 */5 * * * *
REFRESH_TOKEN_CLEANUP_CRON=0 */5 * * * *

# ==============================================================================
# Frontend Environment Variables (for static website build)
# ==============================================================================
# These are used when building the static website Docker image
VITE_BASE_URL=https://rdatacore.eu
VITE_SITE_NAME=RDataCore
VITE_R_DATA_CORE_DEMO_URL=https://demo.rdatacore.eu
VITE_API_DOCS_URL=https://api.rdatacore.eu/api/docs/
VITE_ADMIN_API_DOCS_URL=https://api.rdatacore.eu/admin/api/docs/

# ==============================================================================
# IPv4/IPv6 Configuration Notes
# ==============================================================================
# The nginx reverse proxy is configured to handle both IPv4 and IPv6.
# Ensure your server has IPv6 enabled and your domains have AAAA records.
#
# To check IPv6:
#   ip -6 addr show
#
# To test DNS:
#   dig AAAA api.rdatacore.eu
#   dig AAAA demo.rdatacore.eu
#   dig AAAA rdatacore.eu

# ==============================================================================
# Security Notes
# ==============================================================================
# 1. Change all passwords and secrets before deployment
# 2. Use strong, randomly generated passwords
# 3. Keep this file secure and never commit .env to version control
# 4. Regularly update Docker images and system packages
# 5. Monitor logs for suspicious activity
# 6. This is a DEMO setup - do not use for production workloads

